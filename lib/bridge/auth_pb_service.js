"use strict";

// package: bridge
// file: src/bridge/auth.proto
var src_bridge_auth_pb = require("../../src/bridge/auth_pb");

var google_protobuf_api_pb = require("google-protobuf/google/protobuf/api_pb");

var google_protobuf_empty_pb = require("google-protobuf/google/protobuf/empty_pb");

var grpc = require("@improbable-eng/grpc-web").grpc;

var Auth = function () {
  function Auth() {}

  Auth.serviceName = "bridge.Auth";
  return Auth;
}();

Auth.Descriptor = {
  methodName: "Descriptor",
  service: Auth,
  requestStream: false,
  responseStream: false,
  requestType: google_protobuf_empty_pb.Empty,
  responseType: google_protobuf_api_pb.Api
};
Auth.ByUsernameAndPassword = {
  methodName: "ByUsernameAndPassword",
  service: Auth,
  requestStream: false,
  responseStream: false,
  requestType: src_bridge_auth_pb.UsernameAndPassword,
  responseType: google_protobuf_api_pb.Api
};
exports.Auth = Auth;

function AuthClient(serviceHost, options) {
  this.serviceHost = serviceHost;
  this.options = options || {};
}

AuthClient.prototype.descriptor = function descriptor(requestMessage, metadata, callback) {
  if (arguments.length === 2) {
    callback = arguments[1];
  }

  var client = grpc.unary(Auth.Descriptor, {
    request: requestMessage,
    host: this.serviceHost,
    metadata: metadata,
    transport: this.options.transport,
    debug: this.options.debug,
    onEnd: function onEnd(response) {
      if (callback) {
        if (response.status !== grpc.Code.OK) {
          var err = new Error(response.statusMessage);
          err.code = response.status;
          err.metadata = response.trailers;
          callback(err, null);
        } else {
          callback(null, response.message);
        }
      }
    }
  });
  return {
    cancel: function cancel() {
      callback = null;
      client.close();
    }
  };
};

AuthClient.prototype.byUsernameAndPassword = function byUsernameAndPassword(requestMessage, metadata, callback) {
  if (arguments.length === 2) {
    callback = arguments[1];
  }

  var client = grpc.unary(Auth.ByUsernameAndPassword, {
    request: requestMessage,
    host: this.serviceHost,
    metadata: metadata,
    transport: this.options.transport,
    debug: this.options.debug,
    onEnd: function onEnd(response) {
      if (callback) {
        if (response.status !== grpc.Code.OK) {
          var err = new Error(response.statusMessage);
          err.code = response.status;
          err.metadata = response.trailers;
          callback(err, null);
        } else {
          callback(null, response.message);
        }
      }
    }
  });
  return {
    cancel: function cancel() {
      callback = null;
      client.close();
    }
  };
};

exports.AuthClient = AuthClient;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9icmlkZ2UvYXV0aF9wYl9zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbInNyY19icmlkZ2VfYXV0aF9wYiIsInJlcXVpcmUiLCJnb29nbGVfcHJvdG9idWZfYXBpX3BiIiwiZ29vZ2xlX3Byb3RvYnVmX2VtcHR5X3BiIiwiZ3JwYyIsIkF1dGgiLCJzZXJ2aWNlTmFtZSIsIkRlc2NyaXB0b3IiLCJtZXRob2ROYW1lIiwic2VydmljZSIsInJlcXVlc3RTdHJlYW0iLCJyZXNwb25zZVN0cmVhbSIsInJlcXVlc3RUeXBlIiwiRW1wdHkiLCJyZXNwb25zZVR5cGUiLCJBcGkiLCJCeVVzZXJuYW1lQW5kUGFzc3dvcmQiLCJVc2VybmFtZUFuZFBhc3N3b3JkIiwiZXhwb3J0cyIsIkF1dGhDbGllbnQiLCJzZXJ2aWNlSG9zdCIsIm9wdGlvbnMiLCJwcm90b3R5cGUiLCJkZXNjcmlwdG9yIiwicmVxdWVzdE1lc3NhZ2UiLCJtZXRhZGF0YSIsImNhbGxiYWNrIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiY2xpZW50IiwidW5hcnkiLCJyZXF1ZXN0IiwiaG9zdCIsInRyYW5zcG9ydCIsImRlYnVnIiwib25FbmQiLCJyZXNwb25zZSIsInN0YXR1cyIsIkNvZGUiLCJPSyIsImVyciIsIkVycm9yIiwic3RhdHVzTWVzc2FnZSIsImNvZGUiLCJ0cmFpbGVycyIsIm1lc3NhZ2UiLCJjYW5jZWwiLCJjbG9zZSIsImJ5VXNlcm5hbWVBbmRQYXNzd29yZCJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBRUEsSUFBSUEsa0JBQWtCLEdBQUdDLE9BQU8sQ0FBQywwQkFBRCxDQUFoQzs7QUFDQSxJQUFJQyxzQkFBc0IsR0FBR0QsT0FBTyxDQUFDLHdDQUFELENBQXBDOztBQUNBLElBQUlFLHdCQUF3QixHQUFHRixPQUFPLENBQUMsMENBQUQsQ0FBdEM7O0FBQ0EsSUFBSUcsSUFBSSxHQUFHSCxPQUFPLENBQUMsMEJBQUQsQ0FBUCxDQUFvQ0csSUFBL0M7O0FBRUEsSUFBSUMs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QnBCLE1BQUFBLFFBQVEsR0FBRyxJQUFYO0FBQ0FHLE1BQUFBLE1BQU0sQ0FBQ2tCLEtBQVA7QUFDRDtBQUpJLEdBQVA7QUFNRCxDQWpDRDs7QUFtQ0E3QixPQUFPLENBQUNDLFVBQVIsR0FBcUJBLFVBQXJCIiwic291cmNlc0NvbnRlbnQiOlsiLy8gcGFja2FnZTogYnJpZGdlXG4vLyBmaWxlOiBzcmMvYnJpZGdlL2F1dGgucHJvdG9cblxudmFyIHNyY19icmlkZ2VfYXV0aF9wYiA9IHJlcXVpcmUoXCIuLi8uLi9zcmMvYnJpZGdlL2F1dGhfcGJcIilcbnZhciBnb29nbGVfcHJvdG9idWZfYXBpX3BiID0gcmVxdWlyZShcImdvb2dsZS1wcm90b2J1Zi9nb29nbGUvcHJvdG9idWYvYXBpX3BiXCIpXG52YXIgZ29vZ2xlX3Byb3RvYnVmX2VtcHR5X3BiID0gcmVxdWlyZShcImdvb2dsZS1wcm90b2J1Zi9nb29nbGUvcHJvdG9idWYvZW1wdHlfcGJcIilcbnZhciBncnBjID0gcmVxdWlyZShcIkBpbXByb2JhYmxlLWVuZy9ncnBjLXdlYlwiKS5ncnBjXG5cbnZhciBBdXRoID0gKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBBdXRoKCkge31cbiAgQXV0aC5zZXJ2aWNlTmFtZSA9IFwiYnJpZGdlLkF1dGhcIlxuICByZXR1cm4gQXV0aFxufSkoKVxuXG5BdXRoLkRlc2NyaXB0b3IgPSB7XG4gIG1ldGhvZE5hbWU6IFwiRGVzY3JpcHRvclwiLFxuICBzZXJ2aWNlOiBBdXRoLFxuICByZXF1ZXN0U3RyZWFtOiBmYWxzZSxcbiAgcmVzcG9uc2VTdHJlYW06IGZhbHNlLFxuICByZXF1ZXN0VHlwZTogZ29vZ2xlX3Byb3RvYnVmX2VtcHR5X3BiLkVtcHR5LFxuICByZXNwb25zZVR5cGU6IGdvb2dsZV9wcm90b2J1Zl9hcGlfcGIuQXBpLFxufVxuXG5BdXRoLkJ5VXNlcm5hbWVBbmRQYXNzd29yZCA9IHtcbiAgbWV0aG9kTmFtZTogXCJCeVVzZXJuYW1lQW5kUGFzc3dvcmRcIixcbiAgc2VydmljZTogQXV0aCxcbiAgcmVxdWVzdFN0cmVhbTogZmFsc2UsXG4gIHJlc3BvbnNlU3RyZWFtOiBmYWxzZSxcbiAgcmVxdWVzdFR5cGU6IHNyY19icmlkZ2VfYXV0aF9wYi5Vc2VybmFtZUFuZFBhc3N3b3JkLFxuICByZXNwb25zZVR5cGU6IGdvb2dsZV9wcm90b2J1Zl9hcGlfcGIuQXBpLFxufVxuXG5leHBvcnRzLkF1dGggPSBBdXRoXG5cbmZ1bmN0aW9uIEF1dGhDbGllbnQoc2VydmljZUhvc3QsIG9wdGlvbnMpIHtcbiAgdGhpcy5zZXJ2aWNlSG9zdCA9IHNlcnZpY2VIb3N0XG4gIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge31cbn1cblxuQXV0aENsaWVudC5wcm90b3R5cGUuZGVzY3JpcHRvciA9IGZ1bmN0aW9uIGRlc2NyaXB0b3IoXG4gIHJlcXVlc3RNZXNzYWdlLFxuICBtZXRhZGF0YSxcbiAgY2FsbGJhY2tcbikge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgIGNhbGxiYWNrID0gYXJndW1lbnRzWzFdXG4gIH1cbiAgdmFyIGNsaWVudCA9IGdycGMudW5hcnkoQXV0aC5EZXNjcmlwdG9yLCB7XG4gICAgcmVxdWVzdDogcmVxdWVzdE1lc3NhZ2UsXG4gICAgaG9zdDogdGhpcy5zZXJ2aWNlSG9zdCxcbiAgICBtZXRhZGF0YTogbWV0YWRhdGEsXG4gICAgdHJhbnNwb3J0OiB0aGlzLm9wdGlvbnMudHJhbnNwb3J0LFxuICAgIGRlYnVnOiB0aGlzLm9wdGlvbnMuZGVidWcsXG4gICAgb25FbmQ6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gZ3JwYy5Db2RlLk9LKSB7XG4gICAgICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcihyZXNwb25zZS5zdGF0dXNNZXNzYWdlKVxuICAgICAgICAgIGVyci5jb2RlID0gcmVzcG9uc2Uuc3RhdHVzXG4gICAgICAgICAgZXJyLm1ldGFkYXRhID0gcmVzcG9uc2UudHJhaWxlcnNcbiAgICAgICAgICBjYWxsYmFjayhlcnIsIG51bGwpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzcG9uc2UubWVzc2FnZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gIH0pXG4gIHJldHVybiB7XG4gICAgY2FuY2VsOiBmdW5jdGlvbigpIHtcbiAgICAgIGNhbGxiYWNrID0gbnVsbFxuICAgICAgY2xpZW50LmNsb3NlKClcbiAgICB9LFxuICB9XG59XG5cbkF1dGhDbGllbnQucHJvdG90eXBlLmJ5VXNlcm5hbWVBbmRQYXNzd29yZCA9IGZ1bmN0aW9uIGJ5VXNlcm5hbWVBbmRQYXNzd29yZChcbiAgcmVxdWVzdE1lc3NhZ2UsXG4gIG1ldGFkYXRhLFxuICBjYWxsYmFja1xuKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgY2FsbGJhY2sgPSBhcmd1bWVudHNbMV1cbiAgfVxuICB2YXIgY2xpZW50ID0gZ3JwYy51bmFyeShBdXRoLkJ5VXNlcm5hbWVBbmRQYXNzd29yZCwge1xuICAgIHJlcXVlc3Q6IHJlcXVlc3RNZXNzYWdlLFxuICAgIGhvc3Q6IHRoaXMuc2VydmljZUhvc3QsXG4gICAgbWV0YWRhdGE6IG1ldGFkYXRhLFxuICAgIHRyYW5zcG9ydDogdGhpcy5vcHRpb25zLnRyYW5zcG9ydCxcbiAgICBkZWJ1ZzogdGhpcy5vcHRpb25zLmRlYnVnLFxuICAgIG9uRW5kOiBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IGdycGMuQ29kZS5PSykge1xuICAgICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IocmVzcG9uc2Uuc3RhdHVzTWVzc2FnZSlcbiAgICAgICAgICBlcnIuY29kZSA9IHJlc3BvbnNlLnN0YXR1c1xuICAgICAgICAgIGVyci5tZXRhZGF0YSA9IHJlc3BvbnNlLnRyYWlsZXJzXG4gICAgICAgICAgY2FsbGJhY2soZXJyLCBudWxsKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3BvbnNlLm1lc3NhZ2UpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICB9KVxuICByZXR1cm4ge1xuICAgIGNhbmNlbDogZnVuY3Rpb24oKSB7XG4gICAgICBjYWxsYmFjayA9IG51bGxcbiAgICAgIGNsaWVudC5jbG9zZSgpXG4gICAgfSxcbiAgfVxufVxuXG5leHBvcnRzLkF1dGhDbGllbnQgPSBBdXRoQ2xpZW50XG4iXX0=